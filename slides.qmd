---
title: "Mapping, classifying, and integrating diverse street network datasets: new methods and open source tools for active travel planning"
subtitle: GISRUK 2025
format: 
  clean-revealjs:
    self-contained: true
html-math-method:
  method: mathjax
  url: "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
author:
  - name: Robin Lovelace
    affiliation: Leeds Institute for Transport Studies, University of Leeds, UK
    orcid: 0000-0001-5679-6536
  - name: Zhao Wang
    affiliation: Leeds Institute for Transport Studies, University of Leeds, UK
    orcid: 0000-0002-4054-0533
  - name: Hussein Mahfouz
    affiliation: Leeds Institute for Transport Studies, University of Leeds, UK
    orcid: 0000-0002-6043-8616
  - name: Juan Pablo Fonseca Zamora
    affiliation: Leeds Institute for Transport Studies, University of Leeds, UK
    orcid: 0009-0006-7042-3828
  - name: Angus Calder
    affiliation: Sustrans Scotland
  - name: Martin Lucas-Smith
    affiliation: CycleStreets Ltd, Cambridge, UK
  - name: Dustin Carlino
    affiliation: Alan Turing Institute, London, UK
    orcid: 0000-0002-5565-0989
  - name: Josiah Parry
    affiliation: Environmental Systems Research Institute (Esri), Redlands, CA, USA 
    orcid: 0000-0001-9910-865X
  - name: Rosa Félix
    affiliation: University of Lisbon
    orcid: 0000-0002-5642-6006
date: last-modified
bibliography: references.bib
---

## Abstract

Evidence on street networks and their potential changes under future scenarios is crucial for active travel planning.
However, most active travel models rely on oversimplified street representations, using single variables like 'quietness', neglecting key factors such as footway widths.
This paper introduces new methods for classifying street networks for active travel, integrating diverse datasets from OpenStreetMap and official sources.
Implemented in open source software packages `osmactive` and `anime`, these methods are scalable and reproducible.
The results are showcased in a web application hosted at www.npt.scot, demonstrating how geographic data science can drive high-impact research.

```         
network analysis, transport planning, OpenStreetMap, active travel, reproducible research
```

<!-- <iframe src="https://nptscot.github.io/" width="800" height="600"></iframe> -->

```{=html}
<!-- # Introduction

## Active travel and street networks

-   Active travel is an accessible and cost-effective way to replace short car trips and make transport systems more sustainable.
-   Most active travel models rely on oversimplified street representations, neglecting key factors such as footway widths.
-   Need for new methods for classifying street networks for active travel, integrating diverse datasets. -->
```

## Network Planning Tool (NPT) for Scotland

Web app deployed at [npt.scot](https://www.npt.scot) for cycle network planning in Scotland.

![](images/paste-1-2.png)

::: notes
-   New web-based strategic network planning tool that estimates cycling potential down to the street level.
-   Builds on the functionality of the Propensity to Cycle Tool (PCT) and related tools.
-   Funded by Transport Scotland and developed by the University of Leeds in collaboration with Sustrans Scotland.
-   Open-source and hosted at [github.com/nptscot](https://github.com/nptscot).
:::

## Cycling by Design

The bible of Scottish cycling infrastructure planning.

<!-- https://www.transport.gov.scot/media/50323/cycling-by-design-update-2019-final-document-15-september-2021-1.pdf -->
Available at [transport.gov.scot](https://www.transport.gov.scot/media/50323/cycling-by-design-update-2019-final-document-15-september-2021-1.pdf).

![](images/paste-2.png)

## Key features of the NPT

-   Funded by Transport Scotland to support £millions of investment in active travel.
-   Developed by the University of Leeds in collaboration with Sustrans Scotland.
-   Open-source and hosted at [github.com/nptscot](https://github.com/nptscot).
-   Integration of multiple layers into a single tool.
-   Overcoming limitations of previous strategic network planning tools.
-   Brings together more than a dozen datasets, including Ordnance Survey Mastermap and OpenStreetmap data products.
-   Presents new geographic methods developed to support this work.
-   Uses `osmactive` R package and `anime` Rust crate.

## Key technical challenges

- Integrating multiple datasets into a single tool.
- Network joins

```{mermaid}
graph TD
  OS_OpenRoads[OS OpenRoads (Visualisation Layer)]
  OS_MasterMap_Topo[OS MasterMap Topo (Pavement Widths)]
  OS_MasterMap_Highways[OS MasterMap Highways (Highway Widths)]
  OSM[OpenStreetMap (Max Speed, Cycle Infrastructure, Highway Type)]

  OS_MasterMap_Topo --> OS_OpenRoads
  OS_MasterMap_Highways --> OS_OpenRoads
  OSM --> OS_OpenRoads
```

# Datasets and methods

## Datasets

-   **<span style="color:darkblue;">Ordnance Survey OpenRoads</span>**
-   **<span style="color:darkblue;">OS MasterMap Highways</span>**
-   **<span style="color:darkblue;">OS Mastermap Topography</span>**
-   **<span style="color:darkblue;">OpenStreetMap</span>**
- NRS (National Records of Scotland) data on travel to school
- NRS data on travel to work (Data Zone level)
- Scottish Household Survey (SHS) data
- National Travel Survey (NTS) data
- Data from spatial interaction models (SIMs)

## Software

Code is available and maintained at [github.com/nptscot](https://github.com/nptscot)

-   Backend written in R
-   Frontend of NPT web application written in 'vanilla' JavaScript
-   NPW (Network Planning Workspace) web application written in Rust and Svelte
  - See [nptscot.github.io/npw](https://nptscot.github.io/npw/)

-   `mastermapr` R package for importing MasterMap datasets
-   `osmactive` R package for classifying OSM data
-   `anime` Rust crate for network integration

## Key functions

-   `get_pavement_widths()` function to calculate pavement widths
-   `get_bus_routes()` function to determine bus lanes
-   `classify_cycle_infrastructure()` function to classify cycle infrastructure

## Classifying OpenStreetNetwork ways

-   Functions including `get_travel_network()` and `classify_cycle_infrastructure()` from the `osmactive` package.
-   Classify cycle infrastructure types based on the presence of cycle lanes, tracks, and other features.

## Road width measurements

-   Carriageway width and corridor width are key measurements.
-   Carriageway width determines if infrastructure can fit within the carriageway.
-   Corridor width captures carriageway plus roadside features.
-   `get_pavement_widths()` function in `osmactive` package.

## Minimum cycle track and buffer widths

-   Corridor width determines if footway can be reallocated for cycle infrastructure.
-   Cycling by Design (CbD) guidance on widths and buffers.
-   Speed limit data from OSM used for buffer widths.

## Bus routes and road traffic assumptions

-   Minimum space requirements for motor traffic depend on bus routes and lanes.
-   Active Travel England cross section check tool.
-   `get_bus_routes()` function in `osmactive` package.

# Results

## Network Planning Tool for Scotland

-   Web application for strategic cycle network planning.
-   Key components:
    -   Route network layer
    -   Infrastructure and traffic layer
    -   Street space layer
    -   Core network layer
    -   Network Planning Workspace (NPW) web application (<https://nptscot.github.io/npw/>)

## Street space layer

-   Categorises roads in accordance with Cycling by Design guidance.
-   Methodology for classifying road spaces and cycle infrastructure.

## Conclusion

-   NPT is a cutting-edge web application for strategic cycle network planning.
-   Unique feature: integration of multiple layers.
-   New street space layer: step change in access to combined carriageway and corridor widths.

## Future work

-   Improve NPT by incorporating new datasets.
-   Develop context-specific classifications in `osmactive` package.
-   Support roll-out of methods in new places.

# References